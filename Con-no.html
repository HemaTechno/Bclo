<!-- Firebase SDK + Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<h2>لوحة تحكم الإشعارات</h2>

<label>
  <input type="checkbox" id="enabled" /> تفعيل الإشعار
</label><br><br>

<textarea id="message" placeholder="محتوى الإشعار" rows="4" cols="50"></textarea><br><br>

<label>
  <input type="checkbox" id="showButton" /> إظهار زر في الإشعار
</label><br><br>

<input type="text" id="buttonText" placeholder="نص الزر" /><br><br>
<input type="text" id="buttonLink" placeholder="رابط الزر" /><br><br>

<button onclick="saveSettings()">حفظ التغييرات</button>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const docRef = db.collection("config").doc("siteNotification");

  // تحميل البيانات الحالية
  docRef.get().then(doc => {
    if (doc.exists) {
      const data = doc.data();
      document.getElementById("enabled").checked = data.enabled || false;
      document.getElementById("message").value = data.message || "";
      document.getElementById("showButton").checked = data.showButton || false;
      document.getElementById("buttonText").value = data.buttonText || "";
      document.getElementById("buttonLink").value = data.buttonLink || "";
    }
  });

  function saveSettings() {
    const newData = {
      enabled: document.getElementById("enabled").checked,
      message: document.getElementById("message").value,
      showButton: document.getElementById("showButton").checked,
      buttonText: document.getElementById("buttonText").value,
      buttonLink: document.getElementById("buttonLink").value,
    };
    docRef.set(newData).then(() => {
      alert("تم الحفظ بنجاح");
    });
  }
</script>
